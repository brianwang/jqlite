/*
 * jqAnimation - Animation extension for jQLite
 *
 * Many thanks to the jQuery team's efforts.  Code is
 * Copyright (c) 2010, John Resig.  See
 * http://jquery.org/license
 *
 * This extension is actually the jQuery FX engine as a plugin.  There have been
 * some minor changes to make it less dependent on determining if it works in IE,
 * plus some other additional changes.  But for the most part, this is FX.  The
 * "toggle" type of animation for show/hide isn't supported.
 *
 * @author Brett Fattori (bfattori@gmail.com)
 * @author $Author$
 * @version $Revision$
 *
 * Created: 04/28/2010
 * Modified $Date$
 */
(function(e){function n(a,b){var c={};e.each(u.concat.apply([],u.slice(0,b)),function(){c[this]=a});return c}var j="jQuery"+now(),x=0,v={},y=/z-?index|font-?weight|opacity|zoom|line-?height/i,w=document.defaultView||{};e.props={"for":"htmlFor","class":"className","float":"cssFloat",cssFloat:"cssFloat",styleFloat:"cssFloat",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",tabindex:"tabIndex"};e.extend({cache:{},data:function(a,b,c){a=a==window?v:a;var d=a[j];d||
(d=a[j]=++x);if(b&&!e.cache[d])e.cache[d]={};if(c!==undefined)e.cache[d][b]=c;return b?e.cache[d][b]:d},removeData:function(a,b){a=a==window?v:a;var c=a[j];if(b){if(e.cache[c]){delete e.cache[c][b];b="";for(b in e.cache[c])break;b||e.removeData(a)}}else{try{delete a[j]}catch(d){a.removeAttribute&&a.removeAttribute(j)}delete e.cache[c]}},queue:function(a,b,c){if(a){b=(b||"fx")+"queue";var d=e.data(a,b);if(!d||e.isArray(c))d=e.data(a,b,e.makeArray(c));else c&&d.push(c)}return d},dequeue:function(a,
b){var c=e.queue(a,b),d=c.shift();if(!b||b==="fx")d=c[0];d!==undefined&&d.call(a)},attr:function(a,b,c){if(!(!a||a.nodeType==3||a.nodeType==8)){var d=c!==undefined;b=e.props[b]||b;if(a.tagName){var f=/href|src|style/.test(b);if(b in a&&!f){if(d)a[b]=c;return a[b]}d&&a.setAttribute(b,""+c);a=a.getAttribute(b);return a===null?undefined:a}b=b.replace(/-([a-z])/ig,function(g,h){return h.toUpperCase()});if(d)a[b]=c;return a[b]}},swap:function(a,b,c){var d={};for(var f in b){d[f]=a.style[f];a.style[f]=
b[f]}c.call(a);for(f in b)a.style[f]=d[f]},css:function(a,b,c,d){if(b=="width"||b=="height"){var f;c={position:"absolute",visibility:"hidden",display:"block"};var g=b=="width"?["Left","Right"]:["Top","Bottom"],h=function(){f=b=="width"?a.offsetWidth:a.offsetHeight;d!=="border"&&e.each(g,function(){d||(f-=parseFloat(e.curCSS(a,"padding"+this,true))||0);if(d==="margin")f+=parseFloat(e.curCSS(a,"margin"+this,true))||0;else f-=parseFloat(e.curCSS(a,"border"+this+"Width",true))||0})};a.offsetWidth!==0?
h():e.swap(a,c,h);return Math.max(0,Math.round(f))}return e.curCSS(a,b,c)},prop:function(a,b,c,d,f){if(e.isFunction(b))b=b.call(a,d);return typeof b==="number"&&c=="curCSS"&&!y.test(f)?b+"px":b},curCSS:function(a,b,c){var d,f=a.style;if(b.match(/float/i))b="cssFloat";if(!c&&f&&f[b])d=f[b];else if(w.getComputedStyle){if(b.match(/float/i))b="float";b=b.replace(/([A-Z])/g,"-$1").toLowerCase();if(a=w.getComputedStyle(a,null))d=a.getPropertyValue(b);if(b=="opacity"&&d=="")d="1"}else if(a.currentStyle){d=
b.replace(/\-(\w)/g,function(g,h){return h.toUpperCase()});d=a.currentStyle[b]||a.currentStyle[d];if(!/^\d+(px)?$/i.test(d)&&/^\d/.test(d)){b=f.left;c=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;f.left=d||0;d=f.pixelLeft+"px";f.left=b;a.runtimeStyle.left=c}}return d}});e.fn.extend({queue:function(a,b){if(typeof a!=="string"){b=a;a="fx"}if(b===undefined)return e.queue(this[0],a);return this.each(function(){var c=e.queue(this,a,b);a=="fx"&&c.length==1&&c[0].call(this)})},dequeue:function(a){return this.each(function(){e.dequeue(this,
a)})}});var r={},o,u=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];e.fn.extend({show:function(a,b){if(a)return this.animate(n("show",3),a,b);else{for(var c=0,d=this.length;c<d;c++){var f=e.data(this[c],"olddisplay");this[c].style.display=f||"";if(e.css(this[c],"display")==="none"){f=this[c].tagName;var g;if(r[f])g=r[f];else{var h=e("<"+f+" />");e(document.body).append(h);g=h.css("display");if(g===
"none")g="block";h.remove();r[f]=g}e.data(this[c],"olddisplay",g)}}c=0;for(d=this.length;c<d;c++)this[c].style.display=e.data(this[c],"olddisplay")||"";return this}},hide:function(a,b){if(a)return this.animate(n("hide",3),a,b);else{for(var c=0,d=this.length;c<d;c++){var f=e.data(this[c],"olddisplay");!f&&f!=="none"&&e.data(this[c],"olddisplay",e.css(this[c],"display"))}c=0;for(d=this.length;c<d;c++)this[c].style.display="none";return this}},fadeTo:function(a,b,c){return this.animate({opacity:b},a,
c)},animate:function(a,b,c,d){var f=e.speed(b,c,d);return this[f.queue===false?"each":"queue"](function(){var g=e.extend({},f),h,s=this;for(h in a)if((h=="height"||h=="width")&&this.style){g.display=e.css(this,"display");g.overflow=this.style.overflow}if(g.overflow!=null)this.style.overflow="hidden";g.curAnim=e.extend({},a);e.each(a,function(t,p){var k=new e.fx(s,g,t);if(/show|hide/.test(p))k[p](a);else{var l=p.toString().match(/^([+-]=)?([\d+-.]+)(.*)$/),i=k.cur(true)||0;if(l){var m=parseFloat(l[2]),
q=l[3]||"px";if(q!="px"){s.style[t]=(m||1)+q;i=(m||1)/k.cur(true)*i;s.style[t]=i+q}if(l[1])m=(l[1]=="-="?-1:1)*m+i;k.custom(i,m,q)}else k.custom(i,p,"")}});return true})},stop:function(a,b){var c=e.timers;a&&this.queue([]);this.each(function(){for(var d=c.length-1;d>=0;d--)if(c[d].elem==this){b&&c[d](true);c.splice(d,1)}});b||this.dequeue();return this}});e.each({slideDown:n("show",1),slideUp:n("hide",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"}},function(a,b){e.fn[a]=function(c,d){return this.animate(b,
c,d)}});e.extend({speed:function(a,b,c){var d=typeof a==="object"?a:{complete:c||!c&&b||e.isFunction(a)&&a,duration:a,easing:c&&b||b&&!e.isFunction(b)&&b};d.duration=e.fx.off?0:typeof d.duration==="number"?d.duration:e.fx.speeds[d.duration]||e.fx.speeds._default;d.old=d.complete;d.complete=function(){d.queue!==false&&e(this).dequeue();e.isFunction(d.old)&&d.old.call(this)};return d},easing:{linear:function(a,b,c,d){return c+d*a},swing:function(a,b,c,d){return(-Math.cos(a*Math.PI)/2+0.5)*d+c}},timers:[],
fx:function(a,b,c){this.options=b;this.elem=a;this.prop=c;if(!b.orig)b.orig={}}});e.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(e.fx.step[this.prop]||e.fx.step._default)(this);if((this.prop=="height"||this.prop=="width")&&this.elem.style)this.elem.style.display="block"},cur:function(a){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null))return this.elem[this.prop];return(a=parseFloat(e.css(this.elem,this.prop,
a)))&&a>-10000?a:parseFloat(e.curCSS(this.elem,this.prop))||0},custom:function(a,b,c){function d(g){return f.step(g)}this.startTime=now();this.start=a;this.end=b;this.unit=c||this.unit||"px";this.now=this.start;this.pos=this.state=0;var f=this;d.elem=this.elem;if(d()&&e.timers.push(d)&&!o)o=setInterval(function(){for(var g=e.timers,h=0;h<g.length;h++)g[h]()||g.splice(h--,1);if(!g.length){clearInterval(o);o=undefined}},13)},show:function(){this.options.orig[this.prop]=e.attr(this.elem.style,this.prop);
this.options.show=true;this.custom(this.prop=="width"||this.prop=="height"?1:0,this.cur());e(this.elem).show()},hide:function(){this.options.orig[this.prop]=e.attr(this.elem.style,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(a){var b=now();if(a||b>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();a=this.options.curAnim[this.prop]=true;for(var c in this.options.curAnim)if(this.options.curAnim[c]!==true)a=false;if(a){if(this.options.display!=
null){this.elem.style.overflow=this.options.overflow;this.elem.style.display=this.options.display;if(e.css(this.elem,"display")=="none")this.elem.style.display="block"}this.options.hide&&e(this.elem).hide();if(this.options.hide||this.options.show)for(var d in this.options.curAnim)e.attr(this.elem.style,d,this.options.orig[d]);this.options.complete.call(this.elem)}return false}else{c=b-this.startTime;this.state=c/this.options.duration;this.pos=e.easing[this.options.easing||(e.easing.swing?"swing":
"linear")](this.state,c,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};e.extend(e.fx,{speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){e.attr(a.elem.style,"opacity",a.now)},_default:function(a){if(a.elem.style&&a.elem.style[a.prop]!=null)a.elem.style[a.prop]=a.now+a.unit;else a.elem[a.prop]=a.now}}})})(jQuery);